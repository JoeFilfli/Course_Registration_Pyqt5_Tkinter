<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PyQt5_App &mdash; EECE435_LAB 0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=8dde47fa"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EECE435_LAB
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PyQt5_App.html">PyQt5 Application</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EECE435_LAB</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">PyQt5_App</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for PyQt5_App</h1><div class="highlight"><pre>
<span></span><span class="c1">#I am Joe Filfli, my teammate is Mansour Allam, i decided to document PyQt5</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">School Management System Module.</span>

<span class="sd">This module provides class definitions for Person, Student, Instructor, and Course. </span>
<span class="sd">It includes functionality for managing student and instructor records, as well as course information.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtWidgets</span><span class="p">,</span> <span class="n">QtCore</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QApplication</span><span class="p">,</span> <span class="n">QMainWindow</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QTabWidget</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">,</span>
    <span class="n">QLabel</span><span class="p">,</span> <span class="n">QLineEdit</span><span class="p">,</span> <span class="n">QPushButton</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="p">,</span> <span class="n">QTableWidget</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">,</span>
    <span class="n">QComboBox</span><span class="p">,</span> <span class="n">QHeaderView</span><span class="p">,</span> <span class="n">QDialog</span><span class="p">,</span> <span class="n">QFileDialog</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># ==================== Class Definitions ====================</span>

<div class="viewcode-block" id="Person">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Person">[docs]</a>
<span class="k">class</span> <span class="nc">Person</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a person with basic attributes such as name, age, and email.</span>

<span class="sd">    :param name: The name of the person.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param age: The age of the person, must be a non-negative integer.</span>
<span class="sd">    :type age: int</span>
<span class="sd">    :param email: The email address of the person, validated using a regular expression.</span>
<span class="sd">    :type email: str</span>
<span class="sd">    :raises ValueError: If age is negative or email format is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Person class.</span>

<span class="sd">        :param name: The name of the person.</span>
<span class="sd">        :param age: The age of the person.</span>
<span class="sd">        :param email: The email address of the person.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
    
<div class="viewcode-block" id="Person.introduce">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Person.introduce">[docs]</a>
    <span class="k">def</span> <span class="nf">introduce</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Prints an introduction message with the person&#39;s name and age.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello, my name is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> and I am </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">age</span><span class="si">}</span><span class="s2"> years old.&quot;</span><span class="p">)</span></div>

    
    <span class="k">def</span> <span class="nf">_validate_email</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validates the email address format.</span>

<span class="sd">        :param email: The email address to be validated.</span>
<span class="sd">        :type email: str</span>
<span class="sd">        :return: The validated email address if valid.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        :raises ValueError: If the email format is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[\w\.-]+@[\w\.-]+\.\w+$&#39;</span>
        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">email</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid email format.&quot;</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">_validate_age</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validates the age to ensure it is a non-negative integer.</span>

<span class="sd">        :param age: The age to be validated.</span>
<span class="sd">        :type age: int</span>
<span class="sd">        :return: The validated age if valid.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        :raises ValueError: If the age is negative or not an integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">age</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Age must be a non-negative integer.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="Student">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Student">[docs]</a>
<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a student, inheriting from the Person class.</span>

<span class="sd">    :param name: The name of the student.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param age: The age of the student.</span>
<span class="sd">    :type age: int</span>
<span class="sd">    :param email: The email address of the student.</span>
<span class="sd">    :type email: str</span>
<span class="sd">    :param student_id: The unique student ID.</span>
<span class="sd">    :type student_id: str</span>
<span class="sd">    :param db_id: The database ID for the student (optional).</span>
<span class="sd">    :type db_id: int, optional</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">,</span> <span class="n">db_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Student class.</span>

<span class="sd">        :param name: The name of the student.</span>
<span class="sd">        :param age: The age of the student.</span>
<span class="sd">        :param email: The email address of the student.</span>
<span class="sd">        :param student_id: The unique student ID.</span>
<span class="sd">        :param db_id: The database ID (optional).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_id</span> <span class="o">=</span> <span class="n">student_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registered_courses</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># List of Course objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_id</span> <span class="o">=</span> <span class="n">db_id</span>  <span class="c1"># Database ID</span>

<div class="viewcode-block" id="Student.from_db_row">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Student.from_db_row">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_db_row</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Student instance from a database row.</span>

<span class="sd">        :param row: A tuple containing student data from a database query.</span>
<span class="sd">        :type row: tuple</span>
<span class="sd">        :return: A new instance of the Student class.</span>
<span class="sd">        :rtype: Student</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">db_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span> <span class="o">=</span> <span class="n">row</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">,</span> <span class="n">db_id</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Instructor">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Instructor">[docs]</a>
<span class="k">class</span> <span class="nc">Instructor</span><span class="p">(</span><span class="n">Person</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an instructor, inheriting from the Person class.</span>

<span class="sd">    :param name: The name of the instructor.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param age: The age of the instructor.</span>
<span class="sd">    :type age: int</span>
<span class="sd">    :param email: The email address of the instructor.</span>
<span class="sd">    :type email: str</span>
<span class="sd">    :param instructor_id: The unique instructor ID.</span>
<span class="sd">    :type instructor_id: str</span>
<span class="sd">    :param db_id: The database ID for the instructor (optional).</span>
<span class="sd">    :type db_id: int, optional</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">,</span> <span class="n">db_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Instructor class.</span>

<span class="sd">        :param name: The name of the instructor.</span>
<span class="sd">        :param age: The age of the instructor.</span>
<span class="sd">        :param email: The email address of the instructor.</span>
<span class="sd">        :param instructor_id: The unique instructor ID.</span>
<span class="sd">        :param db_id: The database ID (optional).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id</span> <span class="o">=</span> <span class="n">instructor_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assigned_courses</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># List of Course objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_id</span> <span class="o">=</span> <span class="n">db_id</span>  <span class="c1"># Database ID</span>

<div class="viewcode-block" id="Instructor.from_db_row">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Instructor.from_db_row">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_db_row</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates an Instructor instance from a database row.</span>

<span class="sd">        :param row: A tuple containing instructor data from a database query.</span>
<span class="sd">        :type row: tuple</span>
<span class="sd">        :return: A new instance of the Instructor class.</span>
<span class="sd">        :rtype: Instructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">db_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span> <span class="o">=</span> <span class="n">row</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">,</span> <span class="n">db_id</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Course">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Course">[docs]</a>
<span class="k">class</span> <span class="nc">Course</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a course in the school system.</span>

<span class="sd">    :param course_id: The unique course ID.</span>
<span class="sd">    :type course_id: str</span>
<span class="sd">    :param course_name: The name of the course.</span>
<span class="sd">    :type course_name: str</span>
<span class="sd">    :param instructor: The instructor assigned to the course (optional).</span>
<span class="sd">    :type instructor: Instructor, optional</span>
<span class="sd">    :param db_id: The database ID for the course (optional).</span>
<span class="sd">    :type db_id: int, optional</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">,</span> <span class="n">instructor</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">db_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes a new instance of the Course class.</span>

<span class="sd">        :param course_id: The unique course ID.</span>
<span class="sd">        :param course_name: The name of the course.</span>
<span class="sd">        :param instructor: The instructor assigned to the course.</span>
<span class="sd">        :param db_id: The database ID (optional).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_id</span> <span class="o">=</span> <span class="n">course_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_name</span> <span class="o">=</span> <span class="n">course_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor</span> <span class="o">=</span> <span class="n">instructor</span>  <span class="c1"># Should be an Instructor object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enrolled_students</span> <span class="o">=</span> <span class="p">[]</span>   <span class="c1"># List of Student objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_id</span> <span class="o">=</span> <span class="n">db_id</span>  <span class="c1"># Database ID</span>

<div class="viewcode-block" id="Course.from_db_row">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.Course.from_db_row">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_db_row</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a Course instance from a database row.</span>

<span class="sd">        :param row: A tuple containing course data from a database query.</span>
<span class="sd">        :type row: tuple</span>
<span class="sd">        :return: A new instance of the Course class.</span>
<span class="sd">        :rtype: Course</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">db_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">,</span> <span class="n">instructor_name</span> <span class="o">=</span> <span class="n">row</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">,</span> <span class="n">db_id</span><span class="o">=</span><span class="n">db_id</span><span class="p">)</span></div>
</div>


<span class="c1"># ==================== Database Setup ====================</span>

<span class="c1"># Connect to SQLite database (or create it if it doesn&#39;t exist)</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="c1"># Create tables if they don&#39;t already exist</span>
<div class="viewcode-block" id="create_tables">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.create_tables">[docs]</a>
<span class="k">def</span> <span class="nf">create_tables</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates tables in the SQLite database for managing students, instructors, courses, </span>
<span class="sd">    and registrations if they do not already exist.</span>

<span class="sd">    - `students`: Contains `id`, `name`, `age`, `email`, and `student_id` fields.</span>
<span class="sd">    - `instructors`: Contains `id`, `name`, `age`, `email`, and `instructor_id` fields.</span>
<span class="sd">    - `courses`: Contains `id`, `course_id`, `course_name`, and a foreign key `instructor_id`.</span>
<span class="sd">    - `registrations`: Links students and courses in a many-to-many relationship, </span>
<span class="sd">       containing `student_id` and `course_id` foreign keys.</span>
<span class="sd">    </span>
<span class="sd">    Each table includes necessary constraints, such as `PRIMARY KEY` and `FOREIGN KEY`, </span>
<span class="sd">    to ensure data integrity.</span>
<span class="sd">    </span>
<span class="sd">    The tables created are:</span>
<span class="sd">    </span>
<span class="sd">    - `students`: Stores student data.</span>
<span class="sd">    - `instructors`: Stores instructor data.</span>
<span class="sd">    - `courses`: Stores course data.</span>
<span class="sd">    - `registrations`: Links students with their registered courses.</span>
<span class="sd">    </span>
<span class="sd">    After executing the queries, the changes are committed to the database.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Create `students` table if it does not exist</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS students (</span>
<span class="s1">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">            name TEXT NOT NULL,</span>
<span class="s1">            age INTEGER NOT NULL CHECK(age &gt;= 0),</span>
<span class="s1">            email TEXT NOT NULL UNIQUE,</span>
<span class="s1">            student_id TEXT NOT NULL UNIQUE</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># Create `instructors` table if it does not exist</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS instructors (</span>
<span class="s1">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">            name TEXT NOT NULL,</span>
<span class="s1">            age INTEGER NOT NULL CHECK(age &gt;= 0),</span>
<span class="s1">            email TEXT NOT NULL UNIQUE,</span>
<span class="s1">            instructor_id TEXT NOT NULL UNIQUE</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># Create `courses` table if it does not exist</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS courses (</span>
<span class="s1">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">            course_id TEXT NOT NULL UNIQUE,</span>
<span class="s1">            course_name TEXT NOT NULL,</span>
<span class="s1">            instructor_id INTEGER,</span>
<span class="s1">            FOREIGN KEY(instructor_id) REFERENCES instructors(id)</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># Create `registrations` table if it does not exist</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS registrations (</span>
<span class="s1">            student_id INTEGER,</span>
<span class="s1">            course_id INTEGER,</span>
<span class="s1">            PRIMARY KEY(student_id, course_id),</span>
<span class="s1">            FOREIGN KEY(student_id) REFERENCES students(id),</span>
<span class="s1">            FOREIGN KEY(course_id) REFERENCES courses(id)</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># Commit the transaction to save changes</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span></div>


<span class="c1"># Create tables if they don&#39;t already exist</span>
<span class="n">create_tables</span><span class="p">()</span>

<span class="c1"># ==================== PyQt5 Application ====================</span>

<div class="viewcode-block" id="SchoolManagementSystem">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem">[docs]</a>
<span class="k">class</span> <span class="nc">SchoolManagementSystem</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A PyQt5-based GUI application for managing students, instructors, and courses in a school system.</span>
<span class="sd">    </span>
<span class="sd">    The application provides functionalities for:</span>
<span class="sd">    - Adding, deleting, and searching students and instructors.</span>
<span class="sd">    - Registering students for courses.</span>
<span class="sd">    - Backing up and restoring the database.</span>
<span class="sd">    - Viewing enrolled students and assigned courses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the `SchoolManagementSystem` window.</span>

<span class="sd">        This method sets up the main window properties, such as the title and window size, and </span>
<span class="sd">        establishes a connection to the SQLite database. It also adds buttons for backing up </span>
<span class="sd">        the database to CSV and loading the database from a backup. Additionally, it initializes </span>
<span class="sd">        the user interface (UI) components of the application.</span>

<span class="sd">        The following operations are performed:</span>
<span class="sd">        </span>
<span class="sd">        - Sets the window title to &quot;School Management System&quot;.</span>
<span class="sd">        - Defines the geometry of the window (100x100 for position, 1000x700 for width and height).</span>
<span class="sd">        - Connects the `conn` and `cursor` objects to the SQLite database.</span>
<span class="sd">        - Adds a &quot;Backup Database to CSV&quot; button to the status bar, which calls `backup_database_to_csv`.</span>
<span class="sd">        - Adds a &quot;Load Database&quot; button to the status bar, which calls `load_database`.</span>
<span class="sd">        - Calls the `initUI` method to initialize the user interface and create tabs for students, instructors, and courses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;School Management System&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">700</span><span class="p">)</span>
        
        <span class="c1"># Set up database connection and cursor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span> <span class="o">=</span> <span class="n">conn</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="n">cursor</span>

        <span class="c1"># Create the Backup button</span>
        <span class="n">backup_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Backup Database to CSV&quot;</span><span class="p">)</span>
        <span class="n">backup_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backup_database_to_csv</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">addPermanentWidget</span><span class="p">(</span><span class="n">backup_button</span><span class="p">)</span>

        <span class="c1"># Create the Load Database button</span>
        <span class="n">load_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s1">&#39;Load Database&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">load_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_database</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">addPermanentWidget</span><span class="p">(</span><span class="n">load_button</span><span class="p">)</span>

        <span class="c1"># Initialize the UI</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>


<div class="viewcode-block" id="SchoolManagementSystem.initUI">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.initUI">[docs]</a>
    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the user interface (UI) for the `SchoolManagementSystem` application.</span>

<span class="sd">        This method sets up the main UI components of the application, which includes:</span>
<span class="sd">        </span>
<span class="sd">        - Creating a tabbed layout with separate tabs for managing students, instructors, and courses.</span>
<span class="sd">        - Initializing and adding three tabs: &quot;Students&quot;, &quot;Instructors&quot;, and &quot;Courses&quot; to the main window.</span>
<span class="sd">        - Calling specific methods (`init_student_tab`, `init_instructor_tab`, and `init_course_tab`) to </span>
<span class="sd">        populate each tab with its respective content, forms, and functionality.</span>
<span class="sd">        </span>
<span class="sd">        Steps:</span>
<span class="sd">        </span>
<span class="sd">        1. A `QTabWidget` is created to manage multiple tabs.</span>
<span class="sd">        2. Three `QWidget` instances (`student_tab`, `instructor_tab`, `course_tab`) are created to represent </span>
<span class="sd">        the tabs for students, instructors, and courses.</span>
<span class="sd">        3. Each tab is added to the `QTabWidget` with appropriate labels: &quot;Students&quot;, &quot;Instructors&quot;, and &quot;Courses&quot;.</span>
<span class="sd">        4. Calls are made to initialize the content of each tab via the `init_student_tab`, `init_instructor_tab`, </span>
<span class="sd">        and `init_course_tab` methods.</span>
<span class="sd">        </span>
<span class="sd">        This method does not take any parameters or return any values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c1"># Create the tab widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">QTabWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>

        <span class="c1"># Create Student, Instructor, and Course tabs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_tab</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_tab</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_tab</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>

        <span class="c1"># Add the tabs to the tab widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_tab</span><span class="p">,</span> <span class="s2">&quot;Students&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_tab</span><span class="p">,</span> <span class="s2">&quot;Instructors&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_tab</span><span class="p">,</span> <span class="s2">&quot;Courses&quot;</span><span class="p">)</span>

        <span class="c1"># Initialize each tab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_student_tab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_instructor_tab</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_course_tab</span><span class="p">()</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.backup_database_to_csv">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.backup_database_to_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">backup_database_to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Backs up the current state of the database to CSV files.</span>

<span class="sd">        This method allows the user to back up the `students`, `instructors`, `courses`, and `registrations` </span>
<span class="sd">        tables from the SQLite database to CSV files. The user is prompted to select a directory to save </span>
<span class="sd">        the backup files, and if successful, the data from each table is exported into separate CSV files.</span>

<span class="sd">        Steps:</span>
<span class="sd">        </span>
<span class="sd">        1. Prompts the user to choose a directory using a `QFileDialog`.</span>
<span class="sd">        2. Reads the data from the database tables (`students`, `instructors`, `courses`, `registrations`) </span>
<span class="sd">        into `pandas` DataFrames.</span>
<span class="sd">        3. Defines the filenames for each backup CSV based on the selected folder.</span>
<span class="sd">        4. Saves each table&#39;s DataFrame as a CSV file in the selected directory.</span>
<span class="sd">        5. Displays a success message if the operation is successful.</span>
<span class="sd">        6. If an error occurs during the process, an error message is shown to the user.</span>

<span class="sd">        Exceptions:</span>
<span class="sd">            Exception: If any error occurs during the backup process, it will be caught, </span>
<span class="sd">            and a warning message will be shown to the user.</span>

<span class="sd">        Example Usage:</span>
<span class="sd">            To back up the database, the user would click the &quot;Backup Database to CSV&quot; button, </span>
<span class="sd">            which triggers this method to perform the backup.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If any error occurs while reading from the database or writing to the CSV files.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Prompt the user to select a directory to save the backup files</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">Options</span><span class="p">()</span>
            <span class="n">folder_path</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Select Backup Folder&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">folder_path</span><span class="p">:</span>
                <span class="c1"># Read data from each table into pandas DataFrames</span>
                <span class="n">students_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>
                <span class="n">instructors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM instructors&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>
                <span class="n">courses_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM courses&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>
                <span class="n">registrations_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_sql_query</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM registrations&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">)</span>

                <span class="c1"># Define filenames for each CSV</span>
                <span class="n">students_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;students_backup.csv&#39;</span><span class="p">)</span>
                <span class="n">instructors_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;instructors_backup.csv&#39;</span><span class="p">)</span>
                <span class="n">courses_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;courses_backup.csv&#39;</span><span class="p">)</span>
                <span class="n">registrations_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;registrations_backup.csv&#39;</span><span class="p">)</span>

                <span class="c1"># Save each DataFrame to a CSV file</span>
                <span class="n">students_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">students_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">instructors_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">instructors_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">courses_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">courses_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">registrations_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">registrations_csv</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

                <span class="c1"># Show success message</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Database backup saved to </span><span class="si">{</span><span class="n">folder_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>




<div class="viewcode-block" id="SchoolManagementSystem.init_student_tab">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.init_student_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">init_student_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the student management tab in the `SchoolManagementSystem` UI.</span>

<span class="sd">        This method sets up the layout and functionality for managing student records, allowing the user </span>
<span class="sd">        to add, delete, search, and register students for courses. The tab includes a form to input student </span>
<span class="sd">        information, a table to display student data, and a section for searching and registering students </span>
<span class="sd">        for courses.</span>

<span class="sd">        Layout Details:</span>
<span class="sd">        </span>
<span class="sd">        1. **Left Side: Form to Add Students**</span>
<span class="sd">        - **Name**: A `QLabel` and `QLineEdit` to input the student&#39;s name.</span>
<span class="sd">        - **Age**: A `QLabel` and `QLineEdit` to input the student&#39;s age.</span>
<span class="sd">        - **Email**: A `QLabel` and `QLineEdit` to input the student&#39;s email.</span>
<span class="sd">        - **Student ID**: A `QLabel` and `QLineEdit` to input the student&#39;s unique ID.</span>
<span class="sd">        - **Add Student Button**: A `QPushButton` that calls the `add_student` method when clicked.</span>
<span class="sd">        - **Delete Student Button**: A `QPushButton` that calls the `delete_student` method when clicked.</span>
<span class="sd">        </span>
<span class="sd">        2. **Right Side: Table to Display Students**</span>
<span class="sd">        - A `QTableWidget` to display the student list with columns for ID, Name, Age, Email, and Student ID.</span>
<span class="sd">        - The table is read-only (via `NoEditTriggers`) and supports row selection.</span>
<span class="sd">        - Double-clicking a row calls the `show_student_courses` method to display the student&#39;s registered courses.</span>
<span class="sd">        </span>
<span class="sd">        3. **Search Section**</span>
<span class="sd">        - **Search Bar**: A `QLabel` and `QLineEdit` for entering search queries to filter students by name or student ID.</span>
<span class="sd">        - **Search Button**: A `QPushButton` that calls the `search_students` method when clicked.</span>
<span class="sd">        </span>
<span class="sd">        4. **Registration Section**</span>
<span class="sd">        - **Student ComboBox**: A `QComboBox` populated with students using the `update_student_options` method.</span>
<span class="sd">        - **Course ComboBox**: A `QComboBox` populated with available courses using the `update_course_options` method.</span>
<span class="sd">        - **Register Button**: A `QPushButton` that calls the `register_student_for_course` method when clicked.</span>

<span class="sd">        Finally, the student tab layout is set, and the student table is refreshed by calling `refresh_student_table`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Layout for the student tab</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">form_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="c1"># Left side: Form to add students</span>
        <span class="n">form_group</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">form_group_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Name input</span>
        <span class="n">name_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Name:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">name_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="p">)</span>

        <span class="c1"># Age input</span>
        <span class="n">age_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Age:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">age_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="p">)</span>

        <span class="c1"># Email input</span>
        <span class="n">email_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Email:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">email_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="p">)</span>

        <span class="c1"># Student ID input</span>
        <span class="n">student_id_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Student ID:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">student_id_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="p">)</span>

        <span class="c1"># Add and delete student buttons</span>
        <span class="n">add_student_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Student&quot;</span><span class="p">)</span>
        <span class="n">add_student_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_student</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">add_student_button</span><span class="p">)</span>

        <span class="n">delete_student_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Delete Student&quot;</span><span class="p">)</span>
        <span class="n">delete_student_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_student</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">delete_student_button</span><span class="p">)</span>

        <span class="n">form_group</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">form_group_layout</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">form_group</span><span class="p">)</span>

        <span class="c1"># Right side: Table to display students</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="s1">&#39;Student ID&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">doubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_student_courses</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">form_layout</span><span class="p">)</span>

        <span class="c1"># Search bar</span>
        <span class="n">search_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">search_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Search Students:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_search_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">search_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="n">search_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_students</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_label</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_search_input</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_button</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">search_layout</span><span class="p">)</span>

        <span class="c1"># Registration section</span>
        <span class="n">registration_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">registration_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Register Student for Course&quot;</span><span class="p">)</span>
        <span class="n">registration_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">registration_label</span><span class="p">)</span>

        <span class="n">reg_form_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="c1"># Student ComboBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registration_student_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_student_options</span><span class="p">()</span>
        <span class="n">reg_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Select Student:&quot;</span><span class="p">))</span>
        <span class="n">reg_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registration_student_combo</span><span class="p">)</span>

        <span class="c1"># Course ComboBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registration_course_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_course_options</span><span class="p">()</span>
        <span class="n">reg_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Select Course:&quot;</span><span class="p">))</span>
        <span class="n">reg_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registration_course_combo</span><span class="p">)</span>

        <span class="c1"># Register button</span>
        <span class="n">register_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Register&quot;</span><span class="p">)</span>
        <span class="n">register_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_student_for_course</span><span class="p">)</span>
        <span class="n">reg_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">register_button</span><span class="p">)</span>

        <span class="n">registration_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">reg_form_layout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">registration_layout</span><span class="p">)</span>

        <span class="c1"># Set the layout for the student tab and refresh the table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_tab</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_student_table</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.init_instructor_tab">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.init_instructor_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">init_instructor_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the instructor management tab in the `SchoolManagementSystem` UI.</span>

<span class="sd">        This method sets up the layout and functionality for managing instructor records, allowing the user </span>
<span class="sd">        to add, delete, search for, and assign instructors to courses. The tab includes a form to input </span>
<span class="sd">        instructor information, a table to display instructor data, and sections for searching instructors </span>
<span class="sd">        and assigning them to courses.</span>

<span class="sd">        Layout Details:</span>
<span class="sd">        </span>
<span class="sd">        1. **Left Side: Form to Add Instructors**</span>
<span class="sd">        - **Name**: A `QLabel` and `QLineEdit` to input the instructor&#39;s name.</span>
<span class="sd">        - **Age**: A `QLabel` and `QLineEdit` to input the instructor&#39;s age.</span>
<span class="sd">        - **Email**: A `QLabel` and `QLineEdit` to input the instructor&#39;s email.</span>
<span class="sd">        - **Instructor ID**: A `QLabel` and `QLineEdit` to input the unique instructor ID.</span>
<span class="sd">        - **Add Instructor Button**: A `QPushButton` that triggers the `add_instructor` method when clicked.</span>
<span class="sd">        - **Delete Instructor Button**: A `QPushButton` that triggers the `delete_instructor` method when clicked.</span>

<span class="sd">        2. **Right Side: Table to Display Instructors**</span>
<span class="sd">        - A `QTableWidget` to display the instructor list with columns for ID, Name, Age, Email, and Instructor ID.</span>
<span class="sd">        - The table is read-only (via `NoEditTriggers`) and supports row selection.</span>
<span class="sd">        - Double-clicking a row calls the `show_assigned_courses` method to display the courses assigned to the instructor.</span>

<span class="sd">        3. **Search Section**</span>
<span class="sd">        - **Search Bar**: A `QLabel` and `QLineEdit` for entering search queries to filter instructors by name or ID.</span>
<span class="sd">        - **Search Button**: A `QPushButton` that triggers the `search_instructors` method when clicked.</span>

<span class="sd">        4. **Assignment Section**</span>
<span class="sd">        - **Instructor ComboBox**: A `QComboBox` populated with instructors using the `update_instructor_options` method.</span>
<span class="sd">        - **Course ComboBox**: A `QComboBox` populated with available courses using the `update_unassigned_course_options` method.</span>
<span class="sd">        - **Assign Button**: A `QPushButton` that triggers the `assign_instructor_to_course` method when clicked.</span>

<span class="sd">        After setting up the instructor tab layout, the instructor table is refreshed by calling `refresh_instructor_table`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Layout for the instructor tab</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">form_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="c1"># Left side: Form to add instructors</span>
        <span class="n">form_group</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">form_group_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Name input</span>
        <span class="n">name_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Name:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">name_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="p">)</span>

        <span class="c1"># Age input</span>
        <span class="n">age_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Age:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">age_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="p">)</span>

        <span class="c1"># Email input</span>
        <span class="n">email_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Email:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">email_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="p">)</span>

        <span class="c1"># Instructor ID input</span>
        <span class="n">instructor_id_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Instructor ID:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">instructor_id_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="p">)</span>

        <span class="c1"># Add and delete instructor buttons</span>
        <span class="n">add_instructor_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Instructor&quot;</span><span class="p">)</span>
        <span class="n">add_instructor_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_instructor</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">add_instructor_button</span><span class="p">)</span>

        <span class="n">delete_instructor_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Delete Instructor&quot;</span><span class="p">)</span>
        <span class="n">delete_instructor_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_instructor</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">delete_instructor_button</span><span class="p">)</span>

        <span class="n">form_group</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">form_group_layout</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">form_group</span><span class="p">)</span>

        <span class="c1"># Right side: Table to display instructors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="s1">&#39;Instructor ID&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">doubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_assigned_courses</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">form_layout</span><span class="p">)</span>

        <span class="c1"># Search bar</span>
        <span class="n">search_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">search_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Search Instructors:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_search_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">search_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="n">search_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_instructors</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_label</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_search_input</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_button</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">search_layout</span><span class="p">)</span>

        <span class="c1"># Assignment section</span>
        <span class="n">assignment_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">assignment_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Assign Instructor to Course&quot;</span><span class="p">)</span>
        <span class="n">assignment_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">assignment_label</span><span class="p">)</span>

        <span class="n">assign_form_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="c1"># Instructor ComboBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assignment_instructor_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_instructor_options</span><span class="p">()</span>
        <span class="n">assign_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Select Instructor:&quot;</span><span class="p">))</span>
        <span class="n">assign_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assignment_instructor_combo</span><span class="p">)</span>

        <span class="c1"># Course ComboBox</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assignment_course_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_unassigned_course_options</span><span class="p">()</span>
        <span class="n">assign_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Select Course:&quot;</span><span class="p">))</span>
        <span class="n">assign_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assignment_course_combo</span><span class="p">)</span>

        <span class="c1"># Assign button</span>
        <span class="n">assign_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Assign&quot;</span><span class="p">)</span>
        <span class="n">assign_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_to_course</span><span class="p">)</span>
        <span class="n">assign_form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">assign_button</span><span class="p">)</span>

        <span class="n">assignment_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">assign_form_layout</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">assignment_layout</span><span class="p">)</span>

        <span class="c1"># Set the layout for the instructor tab and refresh the table</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_tab</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_instructor_table</span><span class="p">()</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.init_course_tab">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.init_course_tab">[docs]</a>
    <span class="k">def</span> <span class="nf">init_course_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the course management tab in the `SchoolManagementSystem` UI.</span>

<span class="sd">        This method sets up the layout and functionality for managing courses. The tab includes a form for </span>
<span class="sd">        adding and deleting courses, a table for displaying course data, a search bar for filtering courses, </span>
<span class="sd">        and functionality to view enrolled students.</span>

<span class="sd">        Layout Details:</span>
<span class="sd">        - **Left Side**: A form with inputs for the course ID, course name, and instructor.</span>
<span class="sd">        - **Right Side**: A table displaying the course list with columns for ID, Course ID, Course Name, and Instructor.</span>
<span class="sd">        - **Search Bar**: Allows searching courses by name or ID.</span>
<span class="sd">        - **Add and Delete Buttons**: Buttons to add or delete courses, connected to their respective methods.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Layout for the course tab</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">form_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>

        <span class="c1"># Left side: Form to add courses</span>
        <span class="n">form_group</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">form_group_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Course ID input</span>
        <span class="n">course_id_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Course ID:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">course_id_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="p">)</span>

        <span class="c1"># Course Name input</span>
        <span class="n">course_name_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Course Name:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">course_name_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="p">)</span>

        <span class="c1"># Instructor input</span>
        <span class="n">instructor_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Instructor:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_course_instructor_options</span><span class="p">()</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">instructor_label</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span><span class="p">)</span>

        <span class="c1"># Add and delete course buttons</span>
        <span class="n">add_course_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Course&quot;</span><span class="p">)</span>
        <span class="n">add_course_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_course</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">add_course_button</span><span class="p">)</span>

        <span class="n">delete_course_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Delete Course&quot;</span><span class="p">)</span>
        <span class="n">delete_course_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_course</span><span class="p">)</span>
        <span class="n">form_group_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">delete_course_button</span><span class="p">)</span>

        <span class="n">form_group</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">form_group_layout</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">form_group</span><span class="p">)</span>

        <span class="c1"># Right side: Table to display courses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Course ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Course Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Instructor&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setEditTriggers</span><span class="p">(</span><span class="n">QTableWidget</span><span class="o">.</span><span class="n">NoEditTriggers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">doubleClicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_enrolled_students</span><span class="p">)</span>
        <span class="n">form_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">form_layout</span><span class="p">)</span>

        <span class="c1"># Search bar</span>
        <span class="n">search_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">search_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Search Courses:&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_search_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">search_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="n">search_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_courses</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_label</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_search_input</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_button</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">search_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">course_tab</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_course_table</span><span class="p">()</span></div>



    <span class="c1"># ==================== Student Tab Methods ====================</span>

<div class="viewcode-block" id="SchoolManagementSystem.add_student">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.add_student">[docs]</a>
    <span class="k">def</span> <span class="nf">add_student</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new student to the database.</span>

<span class="sd">        Retrieves the student&#39;s name, age, email, and student ID from the respective input fields,</span>
<span class="sd">        validates the inputs, and inserts the new student into the `students` table in the database.</span>
<span class="sd">        After adding the student, it refreshes the student table and clears the input fields.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the age input is not a valid integer.</span>
<span class="sd">            sqlite3.IntegrityError: If the student ID or email is not unique.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the student is added successfully.</span>
<span class="sd">            - A validation error message if there is an issue with the input.</span>
<span class="sd">            - A database error message if there is a uniqueness constraint violation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">age_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">student_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">age_str</span><span class="p">)</span>
            <span class="n">student</span> <span class="o">=</span> <span class="n">Student</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">)</span>
            <span class="c1"># Save to database</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                INSERT INTO students (name, age, email, student_id)</span>
<span class="s1">                VALUES (?, ?, ?, ?)</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">_email</span><span class="p">,</span> <span class="n">student</span><span class="o">.</span><span class="n">student_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student added to the database.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_student_table</span><span class="p">()</span>
            <span class="c1"># Clear form fields</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_student_options</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Validation Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Database Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Student ID or Email must be unique.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.delete_student">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.delete_student">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_student</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the selected student from the database.</span>

<span class="sd">        Identifies the selected student from the table, deletes them from the `students` table,</span>
<span class="sd">        and refreshes the student table afterward.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the student is deleted successfully.</span>
<span class="sd">            - An error message if no student is selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="n">db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM students WHERE id = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">db_id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student deleted.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_student_table</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_student_options</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;No student selected.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.refresh_student_table">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.refresh_student_table">[docs]</a>
    <span class="k">def</span> <span class="nf">refresh_student_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the student table by retrieving all students from the database.</span>

<span class="sd">        This method fetches all student records from the `students` table and displays them in the</span>
<span class="sd">        student table widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, name, age, email, student_id FROM students&#39;</span><span class="p">)</span>
        <span class="n">students</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">student_row</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">student_row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.search_students">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.search_students">[docs]</a>
    <span class="k">def</span> <span class="nf">search_students</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for students based on the input query.</span>

<span class="sd">        Retrieves the search query from the search input, fetches students from the database</span>
<span class="sd">        whose name or student ID matches the query, and updates the student table with the results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_search_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            SELECT id, name, age, email, student_id FROM students</span>
<span class="s1">            WHERE name LIKE ? OR student_id LIKE ?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">))</span>
        <span class="n">students</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">student_row</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">student_row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.update_student_options">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.update_student_options">[docs]</a>
    <span class="k">def</span> <span class="nf">update_student_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the student dropdown options in the registration form.</span>

<span class="sd">        Retrieves all students from the `students` table and populates the dropdown</span>
<span class="sd">        that allows selecting a student for course registration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registration_student_combo</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, name FROM students&#39;</span><span class="p">)</span>
        <span class="n">students</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registration_student_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.update_course_options">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.update_course_options">[docs]</a>
    <span class="k">def</span> <span class="nf">update_course_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the course dropdown options in the registration form.</span>

<span class="sd">        Retrieves all courses from the `courses` table and populates the dropdown</span>
<span class="sd">        that allows selecting a course for student registration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registration_course_combo</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, course_name FROM courses&#39;</span><span class="p">)</span>
        <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registration_course_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.register_student_for_course">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.register_student_for_course">[docs]</a>
    <span class="k">def</span> <span class="nf">register_student_for_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a student for a selected course.</span>

<span class="sd">        Fetches the selected student and course from the dropdown menus and registers</span>
<span class="sd">        the student for the course in the `registrations` table.</span>

<span class="sd">        Raises:</span>
<span class="sd">            sqlite3.IntegrityError: If the student is already registered for the course.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A success message if registration is successful.</span>
<span class="sd">            - An error message if the student is already registered for the course or if another error occurs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">student_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registration_student_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">course_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registration_course_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">student_db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">student_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">course_db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">course_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                INSERT INTO registrations (student_id, course_id)</span>
<span class="s1">                VALUES (?, ?)</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_db_id</span><span class="p">,</span> <span class="n">course_db_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student registered for course.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Student is already registered for this course.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.show_student_courses">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.show_student_courses">[docs]</a>
    <span class="k">def</span> <span class="nf">show_student_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the courses that a selected student is registered in.</span>

<span class="sd">        When a student is selected from the student table, this method fetches the courses</span>
<span class="sd">        they are registered for from the `registrations` table and displays them in a dialog.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A dialog showing the courses the selected student is enrolled in.</span>
<span class="sd">            - An error message if no student is selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="n">db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT courses.id, courses.course_id, courses.course_name</span>
<span class="s1">                FROM registrations</span>
<span class="s1">                JOIN courses ON registrations.course_id = courses.id</span>
<span class="s1">                WHERE registrations.student_id = ?</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">db_id</span><span class="p">,))</span>
            <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="c1"># Display the courses in a new dialog</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Enrolled Courses&quot;</span><span class="p">)</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Course ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Course Name&#39;</span><span class="p">])</span>
            <span class="n">table</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">courses</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">course</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">courses</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">course</span><span class="p">):</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;No student selected.&quot;</span><span class="p">)</span></div>



    <span class="c1"># ==================== Instructor Tab Methods ====================</span>

<div class="viewcode-block" id="SchoolManagementSystem.add_instructor">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.add_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">add_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new instructor to the database.</span>

<span class="sd">        Retrieves the instructor&#39;s name, age, email, and instructor ID from the respective input fields,</span>
<span class="sd">        validates the inputs, and inserts the new instructor into the `instructors` table in the database.</span>
<span class="sd">        After adding the instructor, it refreshes the instructor table and clears the input fields.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the age input is not a valid integer.</span>
<span class="sd">            sqlite3.IntegrityError: If the instructor ID or email is not unique.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the instructor is added successfully.</span>
<span class="sd">            - A validation error message if there is an issue with the input.</span>
<span class="sd">            - A database error message if there is a uniqueness constraint violation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">age_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">instructor_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">age_str</span><span class="p">)</span>
            <span class="n">instructor</span> <span class="o">=</span> <span class="n">Instructor</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">)</span>
            <span class="c1"># Save to database</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                INSERT INTO instructors (name, age, email, instructor_id)</span>
<span class="s1">                VALUES (?, ?, ?, ?)</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">age</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">_email</span><span class="p">,</span> <span class="n">instructor</span><span class="o">.</span><span class="n">instructor_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor added to the database.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_instructor_table</span><span class="p">()</span>
            <span class="c1"># Clear form fields</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_instructor_options</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_course_instructor_options</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Validation Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Database Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor ID or Email must be unique.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.delete_instructor">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.delete_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the selected instructor from the database.</span>

<span class="sd">        Identifies the selected instructor from the table, deletes them from the `instructors` table,</span>
<span class="sd">        and refreshes the instructor table afterward.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the instructor is deleted successfully.</span>
<span class="sd">            - An error message if no instructor is selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="n">db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM instructors WHERE id = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">db_id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor deleted.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_instructor_table</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_instructor_options</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_course_instructor_options</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;No instructor selected.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.refresh_instructor_table">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.refresh_instructor_table">[docs]</a>
    <span class="k">def</span> <span class="nf">refresh_instructor_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the instructor table by retrieving all instructors from the database.</span>

<span class="sd">        This method fetches all instructor records from the `instructors` table and displays them</span>
<span class="sd">        in the instructor table widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, name, age, email, instructor_id FROM instructors&#39;</span><span class="p">)</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor_row</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instructor_row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.search_instructors">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.search_instructors">[docs]</a>
    <span class="k">def</span> <span class="nf">search_instructors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for instructors based on the input query.</span>

<span class="sd">        Retrieves the search query from the search input, fetches instructors from the database</span>
<span class="sd">        whose name or instructor ID matches the query, and updates the instructor table with the results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_search_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            SELECT id, name, age, email, instructor_id FROM instructors</span>
<span class="s1">            WHERE name LIKE ? OR instructor_id LIKE ?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">))</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor_row</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instructor_row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.update_instructor_options">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.update_instructor_options">[docs]</a>
    <span class="k">def</span> <span class="nf">update_instructor_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the instructor dropdown options for course assignment.</span>

<span class="sd">        Retrieves all instructors from the `instructors` table and populates the dropdown</span>
<span class="sd">        that allows selecting an instructor for course assignment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assignment_instructor_combo</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, name FROM instructors&#39;</span><span class="p">)</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assignment_instructor_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.update_unassigned_course_options">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.update_unassigned_course_options">[docs]</a>
    <span class="k">def</span> <span class="nf">update_unassigned_course_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the course dropdown options for instructor assignment.</span>

<span class="sd">        Retrieves all courses from the `courses` table that do not have an assigned instructor,</span>
<span class="sd">        and populates the dropdown that allows selecting a course for assignment.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assignment_course_combo</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, course_name FROM courses WHERE instructor_id IS NULL&#39;</span><span class="p">)</span>
        <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assignment_course_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.assign_instructor_to_course">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.assign_instructor_to_course">[docs]</a>
    <span class="k">def</span> <span class="nf">assign_instructor_to_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assigns an instructor to a selected course.</span>

<span class="sd">        Fetches the selected instructor and course from the dropdown menus and updates the</span>
<span class="sd">        `courses` table to assign the selected instructor to the selected course.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the assignment is successful.</span>
<span class="sd">            - An error message if an exception occurs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instructor_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assignment_instructor_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">course_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assignment_course_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">instructor_db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">instructor_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">course_db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">course_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                UPDATE courses SET instructor_id = ? WHERE id = ?</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_db_id</span><span class="p">,</span> <span class="n">course_db_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor assigned to course.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_course_table</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_unassigned_course_options</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.show_assigned_courses">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.show_assigned_courses">[docs]</a>
    <span class="k">def</span> <span class="nf">show_assigned_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the courses assigned to a selected instructor.</span>

<span class="sd">        When an instructor is selected from the instructor table, this method fetches the courses</span>
<span class="sd">        they are assigned to from the `courses` table and displays them in a dialog.</span>

<span class="sd">        Displays:</span>
<span class="sd">            - A dialog showing the courses the selected instructor is assigned to.</span>
<span class="sd">            - An error message if no instructor is selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="n">db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT courses.id, courses.course_id, courses.course_name</span>
<span class="s1">                FROM courses</span>
<span class="s1">                WHERE instructor_id = ?</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">db_id</span><span class="p">,))</span>
            <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="c1"># Display the courses in a new dialog</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Assigned Courses&quot;</span><span class="p">)</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Course ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Course Name&#39;</span><span class="p">])</span>
            <span class="n">table</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">courses</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">course</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">courses</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">course</span><span class="p">):</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;No instructor selected.&quot;</span><span class="p">)</span></div>



    <span class="c1"># ==================== Course Tab Methods ====================</span>

<div class="viewcode-block" id="SchoolManagementSystem.add_course">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.add_course">[docs]</a>
    <span class="k">def</span> <span class="nf">add_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new course to the database.</span>

<span class="sd">        Retrieves the course ID, course name, and optionally the instructor from the input fields.</span>
<span class="sd">        Inserts the course into the `courses` table and assigns an instructor if specified.</span>
<span class="sd">        </span>
<span class="sd">        Clears the input fields and refreshes the course table after a successful operation.</span>

<span class="sd">        Raises:</span>
<span class="sd">            - sqlite3.IntegrityError: If the course ID is not unique.</span>
<span class="sd">            - Exception: Handles any other database-related errors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">course_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">course_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">instructor_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">instructor_info</span> <span class="ow">and</span> <span class="n">instructor_info</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">:</span>
                <span class="n">instructor_db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">instructor_info</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id FROM instructors WHERE id = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_db_id</span><span class="p">,))</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Selected instructor does not exist.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">instructor_db_id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">course</span> <span class="o">=</span> <span class="n">Course</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">)</span>
            <span class="c1"># Save to database</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                INSERT INTO courses (course_id, course_name, instructor_id)</span>
<span class="s1">                VALUES (?, ?, ?)</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">course</span><span class="o">.</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course</span><span class="o">.</span><span class="n">course_name</span><span class="p">,</span> <span class="n">instructor_db_id</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Course added to the database.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_course_table</span><span class="p">()</span>
            <span class="c1"># Clear form fields</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_course_options</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_unassigned_course_options</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Database Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Course ID must be unique.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.delete_course">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.delete_course">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes the selected course from the database.</span>

<span class="sd">        Identifies the selected course in the course table and deletes it from the `courses` table.</span>
<span class="sd">        </span>
<span class="sd">        Refreshes the course table and updates the course and instructor options.</span>
<span class="sd">        </span>
<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the course is deleted successfully.</span>
<span class="sd">            - An error message if no course is selected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="n">db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM courses WHERE id = ?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">db_id</span><span class="p">,))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Course deleted.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_course_table</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_course_options</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_unassigned_course_options</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;No course selected.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.refresh_course_table">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.refresh_course_table">[docs]</a>
    <span class="k">def</span> <span class="nf">refresh_course_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the course table by retrieving all courses from the database.</span>

<span class="sd">        Fetches courses from the `courses` table, including the associated instructor, and displays them in the course table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            SELECT courses.id, courses.course_id, courses.course_name, IFNULL(instructors.name, &#39;None&#39;)</span>
<span class="s1">            FROM courses</span>
<span class="s1">            LEFT JOIN instructors ON courses.instructor_id = instructors.id</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">)</span>
        <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course_row</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">course_row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.search_courses">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.search_courses">[docs]</a>
    <span class="k">def</span> <span class="nf">search_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches for courses based on the input query.</span>

<span class="sd">        Fetches courses whose name or course ID matches the query from the database and updates the course table with the results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_search_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            SELECT courses.id, courses.course_id, courses.course_name, IFNULL(instructors.name, &#39;None&#39;)</span>
<span class="s1">            FROM courses</span>
<span class="s1">            LEFT JOIN instructors ON courses.instructor_id = instructors.id</span>
<span class="s1">            WHERE courses.course_name LIKE ? OR courses.course_id LIKE ?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;%</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">))</span>
        <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course_row</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">course_row</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.update_course_instructor_options">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.update_course_instructor_options">[docs]</a>
    <span class="k">def</span> <span class="nf">update_course_instructor_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the instructor options in the course form.</span>

<span class="sd">        Retrieves all instructors from the `instructors` table and populates the dropdown menu for selecting a course instructor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s1">&#39;None&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT id, name FROM instructors&#39;</span><span class="p">)</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_instructor_combo</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.show_enrolled_students">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.show_enrolled_students">[docs]</a>
    <span class="k">def</span> <span class="nf">show_enrolled_students</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays students enrolled in a selected course.</span>

<span class="sd">        Retrieves students registered for the selected course from the `registrations` table</span>
<span class="sd">        and displays the list in a new dialog window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">selectionModel</span><span class="p">()</span><span class="o">.</span><span class="n">selectedRows</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_rows</span><span class="p">:</span>
            <span class="n">db_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_table</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">selected_rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">row</span><span class="p">(),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">                SELECT students.id, students.name, students.student_id</span>
<span class="s1">                FROM registrations</span>
<span class="s1">                JOIN students ON registrations.student_id = students.id</span>
<span class="s1">                WHERE registrations.course_id = ?</span>
<span class="s1">            &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">db_id</span><span class="p">,))</span>
            <span class="n">students</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="c1"># Display the students in a new dialog</span>
            <span class="n">dialog</span> <span class="o">=</span> <span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;Enrolled Students&quot;</span><span class="p">)</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
            <span class="n">table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Student ID&#39;</span><span class="p">])</span>
            <span class="n">table</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
            <span class="n">table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">students</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">row_num</span><span class="p">,</span> <span class="n">student</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">students</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">student</span><span class="p">):</span>
                    <span class="n">table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_num</span><span class="p">,</span> <span class="n">col_num</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
            <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;No course selected.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.load_database">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.load_database">[docs]</a>
    <span class="k">def</span> <span class="nf">load_database</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads a backup of the database from CSV files.</span>

<span class="sd">        Prompts the user to select a folder containing backup CSV files, loads the data from the</span>
<span class="sd">        `students`, `instructors`, `courses`, and `registrations` tables, and restores the data into the database.</span>
<span class="sd">        </span>
<span class="sd">        It first deletes existing data, then imports the backup data. A confirmation is required before proceeding.</span>
<span class="sd">        </span>
<span class="sd">        Displays:</span>
<span class="sd">            - A success message if the database is loaded successfully.</span>
<span class="sd">            - An error message if any issues arise during the process.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">folder_path</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Select Backup Folder&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">folder_path</span><span class="p">:</span>
                <span class="n">students_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;students_backup.csv&#39;</span><span class="p">)</span>
                <span class="n">instructors_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;instructors_backup.csv&#39;</span><span class="p">)</span>
                <span class="n">courses_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;courses_backup.csv&#39;</span><span class="p">)</span>
                <span class="n">registrations_csv</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">folder_path</span><span class="p">,</span> <span class="s1">&#39;registrations_backup.csv&#39;</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="n">students_csv</span><span class="p">,</span> <span class="n">instructors_csv</span><span class="p">,</span> <span class="n">courses_csv</span><span class="p">,</span> <span class="n">registrations_csv</span><span class="p">]):</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Backup files not found in the selected folder.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="n">students_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">students_csv</span><span class="p">)</span>
                <span class="n">instructors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">instructors_csv</span><span class="p">)</span>
                <span class="n">courses_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">courses_csv</span><span class="p">)</span>
                <span class="n">registrations_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">registrations_csv</span><span class="p">)</span>

                <span class="n">confirm</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Confirm Load&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;Loading a backup will overwrite existing data. Do you want to continue?&quot;</span><span class="p">,</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">confirm</span> <span class="o">!=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                    <span class="k">return</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;BEGIN TRANSACTION;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;PRAGMA foreign_keys = OFF;&quot;</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM registrations;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM courses;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM instructors;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM students;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM sqlite_sequence WHERE name=&#39;students&#39;;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM sqlite_sequence WHERE name=&#39;instructors&#39;;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM sqlite_sequence WHERE name=&#39;courses&#39;;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM sqlite_sequence WHERE name=&#39;registrations&#39;;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="n">instructors_df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;instructors&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">courses_df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;courses&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">students_df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;students&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">registrations_df</span><span class="o">.</span><span class="n">to_sql</span><span class="p">(</span><span class="s1">&#39;registrations&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="p">,</span> <span class="n">if_exists</span><span class="o">=</span><span class="s1">&#39;append&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;PRAGMA foreign_keys = ON;&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">refresh_instructor_table</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh_course_table</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh_student_table</span><span class="p">()</span>

                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Database loaded from backup.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">rollback</span><span class="p">()</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;An error occurred while loading the database: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.closeEvent">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.SchoolManagementSystem.closeEvent">[docs]</a>
    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Closes the database connection when the application window is closed.</span>
<span class="sd">        </span>
<span class="sd">        Ensures that the connection to the SQLite database is properly closed when the application exits.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span></div>
</div>


<span class="c1"># ==================== Run the Application ====================</span>

<div class="viewcode-block" id="main">
<a class="viewcode-back" href="../PyQt5_App.html#PyQt5_App.main">[docs]</a>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">SchoolManagementSystem</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Joe Filfli.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>